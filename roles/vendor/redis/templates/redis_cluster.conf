port {{ redis_port }}
dir /var/lib/redis_cluster/redis_{{ redis_port }}
appendonly no
protected-mode no
maxmemory {{ redis_maxmemory }}
cluster-enabled yes
cluster-node-timeout 5000
cluster-config-file /etc/redis_cluster/redis_{{ redis_port }}/nodes_{{ redis_port }}.conf
pidfile /var/run/redis_cluster/redis_{{ redis_port }}.pid
logfile /var/log/redis_cluster/redis_{{ redis_port }}.log
loglevel notice
{% if redis_pass %}
requirepass {{ redis_pass }}
masterauth {{ redis_pass }}
{% endif %}
bind {{ ansible_all_ipv4_addresses | ipaddr('private') | first }} 127.0.0.1

maxmemory-policy allkeys-lfu
